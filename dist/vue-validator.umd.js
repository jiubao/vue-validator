!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t["vue-validator"]=e()}(this,function(){"use strict";var t={data:function(){return{formFailed:!0}}},e=Array.isArray,n=function(){};function r(t){return null==t||""===t}var i=/^1[3456789]\d{9}$/,o=/^\d{15}$/,s=/^\d{17}[\dXx]$/,u=/^[0-9]+$/,a={required:function(t){return!r(t)},mobile:function(t){return!r(t)&&i.test(t)},regular:function(t,e){return e.expression.test(val)},idcard:function(t){return!r(t)&&(o.test(t)||s.test(t))},number:function(t){return u.test(String(t))},max:function(t,e){return!r(t)&&Number(t)<=e},min:function(t,e){return!r(t)&&Number(t)>=e},max_length:function(t,e){return r(t)?e>=0:String(t).length<=e},min_length:function(t,e){return r(t)?e<=0:String(t).length>=e}},c={events:["input"],errorClass:"validate-fail",onSuccess:function(){},onError:function(){}},l=[],d=function(t,e,r,i){this.el=t,this.rules=e||[],this.key=r,this.vm=i,this.pass=!1,this.onError=c.onError||n,this.onSuccess=c.onSuccess||n,this.validate(),this._validate=this.validate.bind(this),this.bind(),l.push(this)},f={all:{configurable:!0}};d.prototype.bind=function(){var t=this;c.events.forEach(function(e){var n,r,i;n=t.el,r=e,i=t._validate,n.addEventListener(r,i,!1)})},d.prototype.validate=function(){var t=this.getValue();return this.pass=!this.rules.some(function(e){return!a[e.key](t,e.value)}),this.pass?this.onSuccess(this):this.onError(this),this.vm.formFailed=l.some(function(t){return!t.pass}),this.pass},d.prototype.getValue=function(){return this.key&&this.vm?(t=this.vm,this.key.split("$").reduce(function(t,e,n,r){return t[e]},t)):this.el.value;var t},d.prototype.destroy=function(){var t=this;this.el=null,this.vm=null,c.events.forEach(function(e){var n,r,i;n=t.el,r=e,i=t._validate,n.removeEventListener(r,i,!1)})},f.all.get=function(){return l},Object.defineProperties(d,f);var v={bind:function(t,n,r){var i=n.value.rules||[];n.value.required&&i.unshift({key:"required"});var o=n.arg||function(t){if(!t||!e(t.data.directives))return"";var n=t.data.directives.find(function(t){return"model"===t.name});return n?n.expression:""}(r),s=new d(t,i,o,r.context);n.value.$$validator=s},update:function(t,e){},unbind:function(t,e){e.value.$$validator.destroy()},name:"validator"};return{install:function(e,n){var r;n&&(r=(r=n)||{},c.events=r.events||c.events,c.onSuccess=r.onSuccess||c.onSuccess,c.onError=r.onError||c.onError),e.mixin(t),e.directive("validator",v),e.prototype.$$validators=d.all}}});