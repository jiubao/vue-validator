!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t["vue-validator"]=e()}(this,function(){"use strict";var t={events:["input"],onSuccess:function(){},onError:function(){},resultKey:"validate$pass"},e={data:function(){var e;return(e={})[t.resultKey]=!0,e}},n=Array.isArray;var r=function(){};function i(t){return null==t||""===t}function s(t,e,n){e="data-vv-"+e;return 2===arguments.length?t.getAttribute(e):t.setAttribute(e,n)}var u=0;var o=/^1[3456789]\d{9}$/,a=/^\d{15}$/,l=/^\d{17}[\dXx]$/,c=/^[0-9]+$/,v={required:function(t){return!i(t)},mobile:function(t){return!i(t)&&o.test(t)},regular:function(t,e){return e.expression.test(val)},idcard:function(t){return!i(t)&&(a.test(t)||l.test(t))},number:function(t){return c.test(String(t))},max:function(t,e){return!i(t)&&Number(t)<=e},min:function(t,e){return!i(t)&&Number(t)>=e},max_length:function(t,e){return i(t)?e>=0:String(t).length<=e},min_length:function(t,e){return i(t)?e<=0:String(t).length>=e}},d=[],f=["INPUT","TEXTAREA","SELECT"],h=function(e,n,i,o){this.id=u++,this.el=e,s(e,"id",this.id),this.rules=n||[],this.key=i,this.vm=o,this.pass=!1,this.onError=t.onError||r,this.onSuccess=t.onSuccess||r,this.validate(),this._validate=this.validate.bind(this),this.bind(),d.push(this)},p={all:{configurable:!0}};h.prototype.bind=function(){var e=this;this.key?this.vm.$watch(this.key,this._validate):f.indexOf(this.el.tagName)>=0&&t.events.forEach(function(t){var n,r,i;n=e.el,r=t,i=e._validate,n.addEventListener(r,i,!1)})},h.prototype.validate=function(){var e=this.getValue();return this.pass=!this.rules.some(function(t){return!v[t.key](e,t.value)}),this.pass?this.onSuccess(this):this.onError(this),this.vm[t.resultKey]=!d.some(function(t){return!t.pass}),this.pass},h.prototype.getValue=function(){return this.key&&this.vm?(t=this.vm,this.key.split(".").reduce(function(t,e,n,r){return t[e]},t)):this.el.value;var t},h.prototype.destroy=function(){var e=this;this.el=null,this.vm=null,t.events.forEach(function(t){var n,r,i;n=e.el,r=t,i=e._validate,n.removeEventListener(r,i,!1)})},p.all.get=function(){return d},Object.defineProperties(h,p);var y={bind:function(t,e,r){var u,o=[];null!==(u=e.value)&&"object"==typeof u?(o=e.value.rules||[],e.value.required&&o.unshift({key:"required"})):"string"!=typeof e.value||i(e.value)||e.value.split("|").forEach(function(t){var e=t.split(":"),n={key:e[0]};e[1]&&(n.value=e[1]),o.push(n)});var a=s(t,"path")||e.arg&&e.arg.replace(/\$/g,".")||function(t){if(!t||!n(t.data.directives))return"";var e=t.data.directives.find(function(t){return"model"===t.name});return e?e.expression:""}(r);new h(t,o,a,r.context)},unbind:function(t,e,n){var r,i=(r=t,n.context.$$validators.find(function(t){return String(t.id)===s(r,"id")}));i&&i.destroy()}};return{install:function(n,r){var i;r&&(i=(i=r)||{},t.events=i.events||t.events,t.onSuccess=i.onSuccess||t.onSuccess,t.onError=i.onError||t.onError,t.resultKey=i.resultKey||t.resultKey),n.mixin(e),n.directive("validator",y),n.prototype.$$validators=h.all}}});