!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t["vue-validator"]=e()}(this,function(){"use strict";var t={events:["input"],onSuccess:function(){},onError:function(){},resultKey:"validate$pass"},e=Array.isArray,n=function(t){return"string"==typeof t},i=function(t){return null!==t&&"object"==typeof t},r=function(){};function u(t){return null==t||""===t}function s(t,e,n){return e="data-vv-"+e,2===arguments.length?t.getAttribute(e):t.setAttribute(e,n)}var o=0,a=/^1[3456789]\d{9}$/,c=/^\d{15}$/,f=/^\d{17}[\dXx]$/,l=/^[0-9]+$/,d={required:function(t){return!u(t)},mobile:function(t){return!u(t)&&a.test(t)},regular:function(t,e){return e.expression.test(val)},idcard:function(t){return!u(t)&&(c.test(t)||f.test(t))},number:function(t){return l.test(String(t))},max:function(t,e){return!u(t)&&Number(t)<=e},min:function(t,e){return!u(t)&&Number(t)>=e},max_length:function(t,e){return u(t)?e>=0:String(t).length<=e},min_length:function(t,e){return u(t)?e<=0:String(t).length>=e}},v=["INPUT","TEXTAREA","SELECT"],h=function(e,n,i,u,o,a){var c=this;this.id=e,this.el=n,s(n,"id",this.id),this.rules=i||[],this.key=u,this.vm=o,this.pass=!1,this.onError=t.onError||r,this.onSuccess=t.onSuccess||r,this.validate(a),this._validate=function(){return c.validate()},this.bind()};h.prototype.bind=function(){var e=this;this.key?this.unwatch=this.vm.$watch(this.key,this._validate):v.indexOf(this.el.tagName)>=0&&t.events.forEach(function(t){var n,i,r;n=e.el,i=t,r=e._validate,n.addEventListener(i,r,!1)})},h.prototype.validate=function(e){var n=this.getValue();return this.pass=!this.rules.some(function(t){return!d[t.key](n,t.value)}),!1!==e&&(this.pass?this.onSuccess(this):this.onError(this)),this.vm[t.resultKey]=g.pass(this.vm),this.pass},h.prototype.getValue=function(){return this.key&&this.vm?(t=this.vm,this.key.split(".").reduce(function(t,e,n,i){return t[e]},t)):this.el.value;var t},h.prototype.destroy=function(){var e=this;this.unwatch&&this.unwatch(),this.el&&t.events.forEach(function(t){return n=e.el,i=t,r=e._validate,void n.removeEventListener(i,r,!1);var n,i,r}),this.el=this.vm=this._validate=null};var p=[];function y(t){return t?p.filter(function(e){return e.vm===t}):p}function m(t){return p.find(function(e){return String(e.id)===String(t)})}var g={add:function(t,e,n,i,r){p.push(new h(o++,t,e,n,i,r))},all:y,pass:function(t){return!y(t).some(function(t){return!t.pass})},find:m,destroy:function t(e){if("number"==typeof e)p.splice(e,1)[0].destroy();else if(n(e))t(p.indexOf(m(e)));else if(e instanceof h)t(p.indexOf(e));else for(var i=p.length-1;i>=0;i--)e&&e!==p[i].vm||t(i)}},E={data:function(){var e;return(e={})[t.resultKey]=!1,e},beforeDestroy:function(){g.destroy(this)}},b={bind:function(t,e,n){S(t,e,n)},update:function(t,e,n){e.value!==e.oldValue&&(g.destroy(s(t,"id")),S(t,e,n))},unbind:function(t){var e=g.find(s(t,"id"));e&&e.destroy()}};function S(t,r,o){var a=[];i(r.value)?(a=r.value.rules||[],r.value.required&&a.unshift({key:"required"})):n(r.value)&&!u(r.value)&&r.value.split("|").forEach(function(t){var e=t.split(":"),n={key:e[0]};e[1]&&(n.value=e[1]),a.push(n)});var c=s(t,"path")||r.arg&&r.arg.replace(/\$/g,".")||function(t){if(!t||!e(t.data.directives))return"";var n=t.data.directives.find(function(t){return"model"===t.name});return n?n.expression:""}(o);g.add(t,a,c,o.context,!!r.modifiers.init)}return{install:function(e,n){var i;n&&(i=(i=n)||{},t.events=i.events||t.events,t.onSuccess=i.onSuccess||t.onSuccess,t.onError=i.onError||t.onError,t.resultKey=i.resultKey||t.resultKey),e.mixin(E),e.directive("validator",b),e.prototype.$$validator=g}}});