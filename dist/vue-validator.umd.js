!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t["vue-validator"]=e()}(this,function(){"use strict";var t={events:["input"],onSuccess:function(){},onError:function(){},resultKey:"validate$pass"},e=Array.isArray;var n=function(){};function r(t){return null==t||""===t}function i(t,e,n){e="data-vv-"+e;return 2===arguments.length?t.getAttribute(e):t.setAttribute(e,n)}var s=0;var u=/^1[3456789]\d{9}$/,o=/^\d{15}$/,a=/^\d{17}[\dXx]$/,c=/^[0-9]+$/,l={required:function(t){return!r(t)},mobile:function(t){return!r(t)&&u.test(t)},regular:function(t,e){return e.expression.test(val)},idcard:function(t){return!r(t)&&(o.test(t)||a.test(t))},number:function(t){return c.test(String(t))},max:function(t,e){return!r(t)&&Number(t)<=e},min:function(t,e){return!r(t)&&Number(t)>=e},max_length:function(t,e){return r(t)?e>=0:String(t).length<=e},min_length:function(t,e){return r(t)?e<=0:String(t).length>=e}},f=["INPUT","TEXTAREA","SELECT"],v=function(e,r,s,u,o){this.id=e,this.el=r,i(r,"id",this.id),this.rules=s||[],this.key=u,this.vm=o,this.pass=!1,this.onError=t.onError||n,this.onSuccess=t.onSuccess||n,this.validate(),this._validate=this.validate.bind(this),this.bind()},d={all:{configurable:!0}};v.prototype.bind=function(){var e=this;this.key?this.vm.$watch(this.key,this._validate):f.indexOf(this.el.tagName)>=0&&t.events.forEach(function(t){var n,r,i;n=e.el,r=t,i=e._validate,n.addEventListener(r,i,!1)})},v.prototype.validate=function(){var e=this.getValue();return this.pass=!this.rules.some(function(t){return!l[t.key](e,t.value)}),this.pass?this.onSuccess(this):this.onError(this),this.vm[t.resultKey]=p.pass(this.vm),this.pass},v.prototype.getValue=function(){return this.key&&this.vm?(t=this.vm,this.key.split(".").reduce(function(t,e,n,r){return t[e]},t)):this.el.value;var t},v.prototype.destroy=function(){var e=this;this.el&&t.events.forEach(function(t){var n,r,i;n=e.el,r=t,i=e._validate,n.removeEventListener(r,i,!1)}),this.el=this.vm=this._validate=null},d.all.get=function(){return validators},Object.defineProperties(v,d);var h=[];var p={add:function(t,e,n,r){h.push(new v(s++,t,e,n,r))},all:function(){return h},pass:function(t){return!h.filter(function(e){return e.vm===t}).some(function(t){return!t.pass})},find:function(t){return h.find(function(e){return String(e.id)===String(t)})},destroy:function(t){if(t)for(var e=h.length-1;e>=0;e--)h[e].vm===t&&(h[e].destroy(),h.splice(e,1))}},y={data:function(){var e;return(e={})[t.resultKey]=!0,e},beforeDestroy:function(){p.destroy(this)}},m={bind:function(t,n,s){var u,o=[];null!==(u=n.value)&&"object"==typeof u?(o=n.value.rules||[],n.value.required&&o.unshift({key:"required"})):"string"!=typeof n.value||r(n.value)||n.value.split("|").forEach(function(t){var e=t.split(":"),n={key:e[0]};e[1]&&(n.value=e[1]),o.push(n)});var a=i(t,"path")||n.arg&&n.arg.replace(/\$/g,".")||function(t){if(!t||!e(t.data.directives))return"";var n=t.data.directives.find(function(t){return"model"===t.name});return n?n.expression:""}(s);p.add(t,o,a,s.context)},unbind:function(t,e,n){var r=p.find(i(t,"id"));r&&r.destroy()}};return{install:function(e,n){var r;n&&(r=(r=n)||{},t.events=r.events||t.events,t.onSuccess=r.onSuccess||t.onSuccess,t.onError=r.onError||t.onError,t.resultKey=r.resultKey||t.resultKey),e.mixin(y),e.directive("validator",m),e.prototype.$$validator=p}}});