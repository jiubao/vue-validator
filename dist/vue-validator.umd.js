!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t["vue-validator"]=e()}(this,function(){"use strict";var t=Array.isArray,e=function(){};function n(t){return null==t||""===t}var r=/^1[3456789]\d{9}$/,i=/^\d{15}$/,o=/^\d{17}[\dXx]$/,s=/^[0-9]+$/,u={required:function(t){return!n(t)},mobile:function(t){return!n(t)&&r.test(t)},regular:function(t,e){return e.expression.test(val)},idcard:function(t){return!n(t)&&(i.test(t)||o.test(t))},number:function(t){return s.test(String(t))},max:function(t,e){return!n(t)&&Number(t)<=e},min:function(t,e){return!n(t)&&Number(t)>=e},max_length:function(t,e){return n(t)?e>=0:String(t).length<=e},min_length:function(t,e){return n(t)?e<=0:String(t).length>=e}},a={events:["input"],errorClass:"validate-fail",onSuccess:function(){},onError:function(){}},c=[],l=function(t,n,r,i){this.el=t,this.rules=n||[],this.key=r,this.vm=i,this.pass=!0,this.onError=a.onError||e,this.onSuccess=a.onSuccess||e,this._validate=this.validate.bind(this),this.bind(),c.push(this)},v={all:{configurable:!0}};l.prototype.bind=function(){var t=this;a.events.forEach(function(e){var n,r,i;n=t.el,r=e,i=t._validate,n.addEventListener(r,i,!1)})},l.prototype.validate=function(){var t=this.getValue();return this.pass=!this.rules.some(function(e){return!u[e.key](t,e.value)}),this.pass?this.onSuccess(this):this.onError(this),this.pass},l.prototype.getValue=function(){return this.key&&this.vm?(t=this.vm,this.key.split("$").reduce(function(t,e,n,r){return t[e]},t)):this.el.value;var t},l.prototype.destroy=function(){var t=this;this.el=null,this.vm=null,a.events.forEach(function(e){var n,r,i;n=t.el,r=e,i=t._validate,n.removeEventListener(r,i,!1)})},v.all.get=function(){return c},Object.defineProperties(l,v);var d={bind:function(e,n,r){var i=n.value.rules||[];n.value.required&&i.unshift({key:"required"});var o=n.arg||function(e){if(!e||!t(e.data.directives))return"";var n=e.data.directives.find(function(t){return"model"===t.name});return n?n.expression:""}(r),s=new l(e,i,o,r.context);n.value.$$validator=s},update:function(t,e){},unbind:function(t,e){e.value.$$validator.destroy()},name:"validator"};return{install:function(t,e){var n;e&&(n=(n=e)||{},a.events=n.events||a.events,a.onSuccess=n.onSuccess||a.onSuccess,a.onError=n.onError||a.onError),t.directive("validator",d),t.prototype.$$validators=l.all}}});