!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t["vue-validator"]=e()}(this,function(){"use strict";var t={events:["input"],errorClass:"validate-fail",onSuccess:function(){},onError:function(){},resultKey:"validate$pass"},e={data:function(){var e;return(e={})[t.resultKey]=!0,e}},n=Array.isArray,r=function(){};function i(t){return null==t||""===t}var s=/^1[3456789]\d{9}$/,u=/^\d{15}$/,o=/^\d{17}[\dXx]$/,a=/^[0-9]+$/,l={required:function(t){return!i(t)},mobile:function(t){return!i(t)&&s.test(t)},regular:function(t,e){return e.expression.test(val)},idcard:function(t){return!i(t)&&(u.test(t)||o.test(t))},number:function(t){return a.test(String(t))},max:function(t,e){return!i(t)&&Number(t)<=e},min:function(t,e){return!i(t)&&Number(t)>=e},max_length:function(t,e){return i(t)?e>=0:String(t).length<=e},min_length:function(t,e){return i(t)?e<=0:String(t).length>=e}},c=[],v=function(e,n,i,s){this.el=e,this.rules=n||[],this.key=i,this.vm=s,this.pass=!1,this.onError=t.onError||r,this.onSuccess=t.onSuccess||r,this.validate(),this._validate=this.validate.bind(this),this.bind(),c.push(this)},d={all:{configurable:!0}};v.prototype.bind=function(){var e=this;t.events.forEach(function(t){var n,r,i;n=e.el,r=t,i=e._validate,n.addEventListener(r,i,!1)})},v.prototype.validate=function(){var e=this.getValue();return this.pass=!this.rules.some(function(t){return!l[t.key](e,t.value)}),this.pass?this.onSuccess(this):this.onError(this),this.vm[t.resultKey]=!c.some(function(t){return!t.pass}),this.pass},v.prototype.getValue=function(){return this.key&&this.vm?(t=this.vm,this.key.split("$").reduce(function(t,e,n,r){return t[e]},t)):this.el.value;var t},v.prototype.destroy=function(){var e=this;this.el=null,this.vm=null,t.events.forEach(function(t){var n,r,i;n=e.el,r=t,i=e._validate,n.removeEventListener(r,i,!1)})},d.all.get=function(){return c},Object.defineProperties(v,d);var f={bind:function(t,e,r){var i=e.value.rules||[];e.value.required&&i.unshift({key:"required"});var s=e.arg||function(t){if(!t||!n(t.data.directives))return"";var e=t.data.directives.find(function(t){return"model"===t.name});return e?e.expression:""}(r),u=new v(t,i,s,r.context);e.value.$$validator=u},update:function(t,e){},unbind:function(t,e){e.value.$$validator.destroy()},name:"validator"};return{install:function(n,r){var i;r&&(i=(i=r)||{},t.events=i.events||t.events,t.onSuccess=i.onSuccess||t.onSuccess,t.onError=i.onError||t.onError),n.mixin(e),n.directive("validator",f),n.prototype.$$validators=v.all}}});